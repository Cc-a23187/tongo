package abi

import (
	"encoding/hex"
	"fmt"
	"github.com/startfellows/tongo/boc"
	"testing"
)

func TestDecoder(t *testing.T) {
	msg := []string{
		"B5EE9C7201010101005200009F5FCC3D14000000000000000080066060C71D54611B6CA591D23CC2FD34C5EE78CE9A6118B533BFEA86A149931A3000CC0C18E3AA8C236D94B23A47985FA698BDCF19D34C2316A677FD50D42932634408", // nft transfer
		"b5ee9c7201010101000e00001800000000776f6f3071387762", // text
		"B5EE9C7201010101005E0000B80F8A7EA500000000000000007038D7EA4C680008015CD3F8AE39269A71BFAD944735473394AB8D175E5B16B653B3602B764218D3BD0035D9D9CE4B9C0D7612E9BE0E582E4E67D890C3AF35E142878AC10F4B609B08DC020200000000", // ft transfer
		"B5EE9C7201010101000E000018D53276DB0000000000000000",                                                                     // excess
		"B5EE9C7201010101003000005B05138D9100000000000000008004479BDAFD7A4200C676136DC05E6D4F03B5ED83AEE7C1C59532CF2630C5B180A8", // nft ownership assigned
	}
	for _, m := range msg {
		h, _ := hex.DecodeString(m)
		c, _ := boc.DeserializeBoc(h)

		s, _, err := MessageDecoder(c[0])
		if err != nil {
			t.Error(err)
		}
		fmt.Printf("%s\n", s)
	}
}
